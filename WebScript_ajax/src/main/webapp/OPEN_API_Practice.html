<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <!-- 부트스트랩5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
    <div class="container mt-5" id = "container-div">
        <h3>비동기로 가져오기</h3>
        <button class = "btn btn-outline-info mb-3" id="btn">클릭</button>
    </div>
</body>

<!-- 부트스트랩5 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">
    const url = "http://openapi.seoul.go.kr:8088/686c66517263686c36356d76676865/json/culturalEventInfo/1/7/";
    
    let containerDiv = document.getElementById("container-div");
    
    fetch(url)
    .then((response) => response.json())
    .then((data) => {
    	//console.log(data);
    	console.log(data.culturalEventInfo.row);
    	//console.log(data.culturalEventInfo.row[0]);
    	const dataRows = data.culturalEventInfo.row;
    	const fetchBtn = document.getElementById("btn");
    	fetchBtn.addEventListener('click',() =>{
    		for(let index in dataRows){
    			//console.log(dataRows[index].DATE);
    			let cardDiv = document.createElement("div");
                cardDiv.className = "card mb-4"
                
                containerDiv.append(cardDiv); // 컨테이너에 card 넣음
                
                let cardHeader = document.createElement("div");
                cardHeader.className = "card-header bg-success"
                cardHeader.style.color = "white";
                cardDiv.append(cardHeader); // card에 card-header넣음
                
                let cardBody = document.createElement("div");
                cardBody.className = "card-body bg-light"
                cardDiv.append(cardBody); // card에 card-body넣음
                
                let cardFooter = document.createElement("div");
                cardFooter.className = "card-footer bg-dark";
                cardFooter.style.color = "white";
                cardDiv.append(cardFooter); // card에 card-footer넣음
                
                let pHeader = document.createElement("p");
                pHeader.innerText = dataRows[index].TITLE;
                cardHeader.append(pHeader);
            
                let mainImg = document.createElement("img");
                mainImg.src = dataRows[index].MAIN_IMG;
                mainImg.style.width = "300px";
                mainImg.style.height = "auto";
                cardBody.append(mainImg);
                
                let pFooter = document.createElement("p");
                pFooter.innerText = dataRows[index].PLACE;
                cardFooter.append(pFooter);
    		}
    	});
    	
    });
    /*
    	for(let index in dataRows){ // 이미지 뽑기
            let cardDiv = document.createElement("div");
            cardDiv.className = "card"
            
            containerDiv.append(cardDiv); // 컨테이너에 card 넣음
            
            let cardHeader = document.createElement("div");
            cardHeader.className = "card-header bg-success"
            cardHeader.style.color = "white";
            cardDiv.append(cardHeader); // card에 card-header넣음
            
            let cardBody = document.createElement("div");
            cardBody.className = "card-body bg-light"
            cardDiv.append(cardBody); // card에 card-body넣음
            
            let cardFooter = document.createElement("div");
            cardFooter.className = "card-footer bg-dark";
            cardFooter.style.color = "white";
            cardDiv.append(cardFooter); // card에 card-footer넣음
            
            let pHeader = document.createElement("p");
            pHeader.innerText = dataRows[index].title;
            cardHeader.append(pHeader);
        
            let mainImg = document.createElement("img");
            mainImg.src = dataRows[index].main_img;
            mainImg.style.width = "300px";
            mainImg.style.height = "auto";
            cardBody.append(mainImg);
            
            let pFooter = document.createElement("p");
            pFooter.innerText = dataRows[index].place;
            cardFooter.append(pFooter);
        } */

    </script>
</html>